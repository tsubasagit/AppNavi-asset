{
  "templateId": "crm",
  "version": "1.0.0",
  "views": [
    {
      "id": "dashboard",
      "name": "ダッシュボード",
      "type": "dashboard",
      "route": "/",
      "layout": "grid",
      "columns": 12,
      "widgets": [
        {
          "id": "total-customers",
          "type": "stat",
          "label": "総顧客数",
          "query": {
            "table": "customers",
            "aggregation": "count"
          },
          "icon": "users",
          "color": "#3b82f6",
          "colSpan": 3
        },
        {
          "id": "new-leads",
          "type": "stat",
          "label": "今月の新規リード",
          "query": {
            "table": "customers",
            "aggregation": "count",
            "filter": {
              "status": "見込み",
              "registrationDate": {
                "$gte": "今月初日"
              }
            }
          },
          "icon": "user-plus",
          "color": "#10b981",
          "colSpan": 3
        },
        {
          "id": "active-deals",
          "type": "stat",
          "label": "対応中の商談数",
          "query": {
            "table": "deals",
            "aggregation": "count",
            "filter": {
              "stage": {
                "$in": ["見込み", "商談中", "提案中"]
              }
            }
          },
          "icon": "briefcase",
          "color": "#f59e0b",
          "colSpan": 3
        },
        {
          "id": "today-tasks",
          "type": "stat",
          "label": "本日の要対応タスク",
          "query": {
            "table": "activities",
            "aggregation": "count",
            "filter": {
              "nextActionDate": "今日"
            }
          },
          "icon": "calendar",
          "color": "#ef4444",
          "colSpan": 3
        },
        {
          "id": "customer-status-chart",
          "type": "chart",
          "label": "顧客ステータス分布",
          "chartType": "pie",
          "query": {
            "table": "customers",
            "groupBy": "status",
            "aggregation": "count"
          },
          "colSpan": 4
        },
        {
          "id": "deal-stage-chart",
          "type": "chart",
          "label": "商談ステージ分布",
          "chartType": "bar",
          "query": {
            "table": "deals",
            "groupBy": "stage",
            "aggregation": "count"
          },
          "colSpan": 4
        },
        {
          "id": "revenue-trend",
          "type": "chart",
          "label": "売上推移",
          "chartType": "line",
          "query": {
            "table": "deals",
            "groupBy": "closeDate",
            "aggregation": "sum",
            "field": "amount",
            "filter": {
              "stage": "成約"
            }
          },
          "colSpan": 4
        },
        {
          "id": "recent-activities",
          "type": "list",
          "label": "最近の活動履歴",
          "query": {
            "table": "activities",
            "limit": 10,
            "sort": {
              "field": "activityDateTime",
              "order": "desc"
            }
          },
          "fields": [
            {
              "field": "title",
              "label": "タイトル"
            },
            {
              "field": "type",
              "label": "種別",
              "render": "badge"
            },
            {
              "field": "description",
              "label": "内容"
            },
            {
              "field": "activityDateTime",
              "label": "日時",
              "format": "datetime"
            }
          ],
          "colSpan": 12
        }
      ]
    },
    {
      "id": "customer-list",
      "name": "顧客一覧",
      "type": "table",
      "route": "/customers",
      "table": "customers",
      "searchable": true,
      "searchFields": ["name", "company"],
      "columns": [
        {
          "field": "name",
          "label": "顧客名",
          "width": 150,
          "sortable": true
        },
        {
          "field": "company",
          "label": "会社名",
          "width": 200,
          "sortable": true
        },
        {
          "field": "department",
          "label": "部署名",
          "width": 120,
          "sortable": true
        },
        {
          "field": "position",
          "label": "役職",
          "width": 100,
          "sortable": true
        },
        {
          "field": "status",
          "label": "ステータス",
          "width": 120,
          "sortable": true,
          "render": "badge"
        },
        {
          "field": "probability",
          "label": "見込み度",
          "width": 100,
          "sortable": true
        },
        {
          "field": "assignedTo",
          "label": "担当者",
          "width": 120,
          "sortable": true
        },
        {
          "field": "lastContact",
          "label": "最終接触日",
          "width": 120,
          "sortable": true,
          "format": "date"
        },
        {
          "field": "registrationDate",
          "label": "登録日",
          "width": 120,
          "sortable": true,
          "format": "date"
        }
      ],
      "filters": [
        {
          "field": "status",
          "type": "select",
          "label": "顧客ステータス"
        },
        {
          "field": "probability",
          "type": "select",
          "label": "見込み度"
        },
        {
          "field": "assignedTo",
          "type": "select",
          "label": "担当者"
        },
        {
          "field": "industry",
          "type": "select",
          "label": "業種"
        }
      ],
      "actions": [
        {
          "type": "create",
          "label": "新規顧客登録"
        },
        {
          "type": "edit",
          "label": "編集"
        },
        {
          "type": "delete",
          "label": "削除"
        },
        {
          "type": "view",
          "label": "詳細",
          "route": "/customers/:id"
        }
      ],
      "defaultSort": {
        "field": "updatedAt",
        "order": "desc"
      },
      "pagination": {
        "pageSize": 20
      }
    },
    {
      "id": "deal-pipeline",
      "name": "商談パイプライン",
      "type": "kanban",
      "route": "/pipeline",
      "table": "deals",
      "groupBy": "stage",
      "stages": [
        {
          "id": "見込み",
          "label": "見込み",
          "color": "#3b82f6",
          "order": 1
        },
        {
          "id": "商談中",
          "label": "商談中",
          "color": "#8b5cf6",
          "order": 2
        },
        {
          "id": "提案中",
          "label": "提案中",
          "color": "#f59e0b",
          "order": 3
        },
        {
          "id": "成約",
          "label": "成約",
          "color": "#10b981",
          "order": 4
        },
        {
          "id": "失注",
          "label": "失注",
          "color": "#ef4444",
          "order": 5
        }
      ],
      "cardFields": [
        {
          "field": "title",
          "label": "商談名",
          "primary": true
        },
        {
          "field": "customerId",
          "label": "顧客",
          "relation": {
            "table": "customers",
            "field": "name"
          }
        },
        {
          "field": "customerId",
          "label": "会社名",
          "relation": {
            "table": "customers",
            "field": "company"
          }
        },
        {
          "field": "amount",
          "label": "商談金額",
          "format": "currency",
          "highlight": true
        },
        {
          "field": "probability",
          "label": "成約確率",
          "format": "percentage",
          "render": "badge"
        },
        {
          "field": "assignedTo",
          "label": "担当者"
        },
        {
          "field": "expectedCloseDate",
          "label": "見込み成約日",
          "format": "date"
        }
      ],
      "actions": [
        {
          "type": "create",
          "label": "新規商談作成"
        },
        {
          "type": "edit",
          "label": "編集"
        },
        {
          "type": "delete",
          "label": "削除"
        },
        {
          "type": "move",
          "label": "ステージ移動",
          "draggable": true
        }
      ]
    },
    {
      "id": "customer-detail",
      "name": "顧客詳細",
      "type": "detail",
      "route": "/customers/:id",
      "table": "customers",
      "layout": "two-column",
      "sections": [
        {
          "id": "customer-info",
          "label": "顧客情報",
          "type": "form",
          "fields": [
            "id",
            "name",
            "company",
            "department",
            "position",
            "email",
            "phone",
            "postalCode",
            "address",
            "industry",
            "employeeCount",
            "annualRevenue",
            "status",
            "probability",
            "assignedTo",
            "lastContact",
            "registrationDate",
            "notes"
          ],
          "editable": true
        },
        {
          "id": "related-deals",
          "label": "関連商談",
          "type": "table",
          "table": "deals",
          "relation": {
            "field": "customerId",
            "value": "{{customer.id}}"
          },
          "columns": [
            {
              "field": "title",
              "label": "商談名"
            },
            {
              "field": "stage",
              "label": "ステージ",
              "render": "badge"
            },
            {
              "field": "amount",
              "label": "金額",
              "format": "currency"
            },
            {
              "field": "probability",
              "label": "成約確率",
              "format": "percentage"
            },
            {
              "field": "expectedCloseDate",
              "label": "見込み成約日",
              "format": "date"
            }
          ],
          "actions": [
            {
              "type": "create",
              "label": "新規商談作成"
            },
            {
              "type": "edit",
              "label": "編集"
            }
          ]
        },
        {
          "id": "activity-timeline",
          "label": "活動履歴",
          "type": "timeline",
          "table": "activities",
          "relation": {
            "field": "customerId",
            "value": "{{customer.id}}"
          },
          "groupBy": "date",
          "fields": [
            {
              "field": "type",
              "label": "活動種別",
              "render": "badge",
              "icon": true
            },
            {
              "field": "title",
              "label": "タイトル",
              "primary": true
            },
            {
              "field": "description",
              "label": "内容"
            },
            {
              "field": "activityDateTime",
              "label": "活動日時",
              "format": "datetime"
            },
            {
              "field": "assignedTo",
              "label": "担当者"
            },
            {
              "field": "nextAction",
              "label": "次回アクション"
            },
            {
              "field": "nextActionDate",
              "label": "次回アクション日",
              "format": "date"
            },
            {
              "field": "priority",
              "label": "重要度",
              "render": "badge"
            }
          ],
          "filters": [
            {
              "field": "type",
              "type": "select",
              "label": "活動種別"
            }
          ],
          "actions": [
            {
              "type": "create",
              "label": "新規活動登録"
            },
            {
              "type": "edit",
              "label": "編集"
            },
            {
              "type": "delete",
              "label": "削除"
            }
          ],
          "defaultSort": {
            "field": "activityDateTime",
            "order": "desc"
          }
        }
      ]
    }
  ],
  "theme": {
    "primaryColor": "#8b5cf6",
    "secondaryColor": "#6366f1",
    "fontFamily": "Inter, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif",
    "borderRadius": "8px",
    "darkMode": true,
    "spacing": {
      "small": "8px",
      "medium": "16px",
      "large": "24px"
    },
    "colors": {
      "success": "#10b981",
      "warning": "#f59e0b",
      "error": "#ef4444",
      "gray": "#6b7280"
    }
  }
}
