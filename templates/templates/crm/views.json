{
  "templateId": "crm",
  "version": "2.0.0",
  "views": [
    {
      "id": "dashboard",
      "name": "ダッシュボード",
      "type": "dashboard",
      "route": "/",
      "layout": "grid",
      "columns": 12,
      "widgets": [
        {
          "id": "total-customers",
          "type": "stat",
          "label": "総顧客数",
          "query": {
            "table": "customers",
            "aggregation": "count"
          },
          "icon": "users",
          "color": "#3b82f6",
          "colSpan": 3
        },
        {
          "id": "new-leads",
          "type": "stat",
          "label": "今月の新規リード",
          "query": {
            "table": "customers",
            "aggregation": "count",
            "filter": {
              "status": "見込み",
              "registrationDate": {
                "$gte": "今月初日"
              }
            }
          },
          "icon": "user-plus",
          "color": "#10b981",
          "colSpan": 3
        },
        {
          "id": "active-deals",
          "type": "stat",
          "label": "対応中の商談数",
          "query": {
            "table": "deals",
            "aggregation": "count",
            "filter": {
              "stage": {
                "$in": ["見込み", "商談中", "提案中"]
              }
            }
          },
          "icon": "briefcase",
          "color": "#f59e0b",
          "colSpan": 3
        },
        {
          "id": "today-tasks",
          "type": "stat",
          "label": "本日の要対応タスク",
          "query": {
            "table": "activities",
            "aggregation": "count",
            "filter": {
              "nextActionDate": "今日"
            }
          },
          "icon": "calendar",
          "color": "#ef4444",
          "colSpan": 3
        },
        {
          "id": "customer-status-chart",
          "type": "chart",
          "label": "顧客ステータス分布",
          "chartType": "pie",
          "query": {
            "table": "customers",
            "groupBy": "status",
            "aggregation": "count"
          },
          "colSpan": 4
        },
        {
          "id": "deal-stage-chart",
          "type": "chart",
          "label": "商談ステージ分布",
          "chartType": "bar",
          "query": {
            "table": "deals",
            "groupBy": "stage",
            "aggregation": "count"
          },
          "colSpan": 4
        },
        {
          "id": "revenue-trend",
          "type": "chart",
          "label": "売上推移",
          "chartType": "line",
          "query": {
            "table": "deals",
            "groupBy": "closeDate",
            "aggregation": "sum",
            "field": "amount",
            "filter": {
              "stage": "成約"
            }
          },
          "colSpan": 4
        },
        {
          "id": "monthly-revenue",
          "type": "stat",
          "label": "今月の売上",
          "query": {
            "table": "invoices",
            "aggregation": "sum",
            "field": "totalAmount",
            "filter": {
              "status": "入金済み",
              "paidDate": {
                "$gte": "今月初日"
              }
            }
          },
          "icon": "yen-sign",
          "color": "#10b981",
          "colSpan": 3,
          "format": "currency"
        },
        {
          "id": "pending-invoices",
          "type": "stat",
          "label": "未入金請求額",
          "query": {
            "table": "invoices",
            "aggregation": "sum",
            "field": "totalAmount",
            "filter": {
              "status": {
                "$in": ["送付済み", "確認済み", "一部入金"]
              }
            }
          },
          "icon": "alert-circle",
          "color": "#ef4444",
          "colSpan": 3,
          "format": "currency"
        },
        {
          "id": "active-quotes",
          "type": "stat",
          "label": "有効見積書数",
          "query": {
            "table": "quotes",
            "aggregation": "count",
            "filter": {
              "status": {
                "$in": ["送付済み", "承認待ち"]
              },
              "validUntil": {
                "$gte": "今日"
              }
            }
          },
          "icon": "file-text",
          "color": "#3b82f6",
          "colSpan": 3
        },
        {
          "id": "overdue-tasks",
          "type": "stat",
          "label": "期限超過タスク",
          "query": {
            "table": "tasks",
            "aggregation": "count",
            "filter": {
              "status": {
                "$in": ["未着手", "進行中"]
              },
              "dueDate": {
                "$lt": "今日"
              }
            }
          },
          "icon": "clock",
          "color": "#f59e0b",
          "colSpan": 3
        },
        {
          "id": "revenue-forecast",
          "type": "chart",
          "label": "売上予測（今月・来月）",
          "chartType": "bar",
          "query": {
            "table": "deals",
            "groupBy": "expectedCloseDate",
            "aggregation": "sum",
            "field": "amount",
            "filter": {
              "stage": {
                "$in": ["商談中", "提案中"]
              },
              "expectedCloseDate": {
                "$gte": "今月初日",
                "$lte": "来月末日"
              }
            }
          },
          "colSpan": 6
        },
        {
          "id": "customer-rank-distribution",
          "type": "chart",
          "label": "顧客ランク分布",
          "chartType": "pie",
          "query": {
            "table": "customers",
            "groupBy": "customerRank",
            "aggregation": "count"
          },
          "colSpan": 3
        },
        {
          "id": "invoice-status-chart",
          "type": "chart",
          "label": "請求書ステータス分布",
          "chartType": "doughnut",
          "query": {
            "table": "invoices",
            "groupBy": "status",
            "aggregation": "count"
          },
          "colSpan": 3
        },
        {
          "id": "recent-activities",
          "type": "list",
          "label": "最近の活動履歴",
          "query": {
            "table": "activities",
            "limit": 10,
            "sort": {
              "field": "activityDateTime",
              "order": "desc"
            }
          },
          "fields": [
            {
              "field": "title",
              "label": "タイトル"
            },
            {
              "field": "type",
              "label": "種別",
              "render": "badge"
            },
            {
              "field": "description",
              "label": "内容"
            },
            {
              "field": "activityDateTime",
              "label": "日時",
              "format": "datetime"
            }
          ],
          "colSpan": 12
        }
      ]
    },
    {
      "id": "customer-list",
      "name": "顧客一覧",
      "type": "table",
      "route": "/customers",
      "table": "customers",
      "searchable": true,
      "searchFields": ["name", "company"],
      "columns": [
        {
          "field": "name",
          "label": "顧客名",
          "width": 150,
          "sortable": true
        },
        {
          "field": "company",
          "label": "会社名",
          "width": 200,
          "sortable": true
        },
        {
          "field": "department",
          "label": "部署名",
          "width": 120,
          "sortable": true
        },
        {
          "field": "position",
          "label": "役職",
          "width": 100,
          "sortable": true
        },
        {
          "field": "status",
          "label": "ステータス",
          "width": 120,
          "sortable": true,
          "render": "badge"
        },
        {
          "field": "probability",
          "label": "見込み度",
          "width": 100,
          "sortable": true
        },
        {
          "field": "assignedTo",
          "label": "担当者",
          "width": 120,
          "sortable": true
        },
        {
          "field": "lastContact",
          "label": "最終接触日",
          "width": 120,
          "sortable": true,
          "format": "date"
        },
        {
          "field": "registrationDate",
          "label": "登録日",
          "width": 120,
          "sortable": true,
          "format": "date"
        }
      ],
      "filters": [
        {
          "field": "status",
          "type": "select",
          "label": "顧客ステータス"
        },
        {
          "field": "probability",
          "type": "select",
          "label": "見込み度"
        },
        {
          "field": "assignedTo",
          "type": "select",
          "label": "担当者"
        },
        {
          "field": "industry",
          "type": "select",
          "label": "業種"
        }
      ],
      "actions": [
        {
          "type": "create",
          "label": "新規顧客登録"
        },
        {
          "type": "edit",
          "label": "編集"
        },
        {
          "type": "delete",
          "label": "削除"
        },
        {
          "type": "view",
          "label": "詳細",
          "route": "/customers/:id"
        }
      ],
      "defaultSort": {
        "field": "updatedAt",
        "order": "desc"
      },
      "pagination": {
        "pageSize": 20
      }
    },
    {
      "id": "deal-pipeline",
      "name": "商談パイプライン",
      "type": "kanban",
      "route": "/pipeline",
      "table": "deals",
      "groupBy": "stage",
      "stages": [
        {
          "id": "見込み",
          "label": "見込み",
          "color": "#3b82f6",
          "order": 1
        },
        {
          "id": "商談中",
          "label": "商談中",
          "color": "#8b5cf6",
          "order": 2
        },
        {
          "id": "提案中",
          "label": "提案中",
          "color": "#f59e0b",
          "order": 3
        },
        {
          "id": "成約",
          "label": "成約",
          "color": "#10b981",
          "order": 4
        },
        {
          "id": "失注",
          "label": "失注",
          "color": "#ef4444",
          "order": 5
        }
      ],
      "cardFields": [
        {
          "field": "title",
          "label": "商談名",
          "primary": true
        },
        {
          "field": "customerId",
          "label": "顧客",
          "relation": {
            "table": "customers",
            "field": "name"
          }
        },
        {
          "field": "customerId",
          "label": "会社名",
          "relation": {
            "table": "customers",
            "field": "company"
          }
        },
        {
          "field": "amount",
          "label": "商談金額",
          "format": "currency",
          "highlight": true
        },
        {
          "field": "probability",
          "label": "成約確率",
          "format": "percentage",
          "render": "badge"
        },
        {
          "field": "assignedTo",
          "label": "担当者"
        },
        {
          "field": "expectedCloseDate",
          "label": "見込み成約日",
          "format": "date"
        }
      ],
      "actions": [
        {
          "type": "create",
          "label": "新規商談作成"
        },
        {
          "type": "edit",
          "label": "編集"
        },
        {
          "type": "delete",
          "label": "削除"
        },
        {
          "type": "move",
          "label": "ステージ移動",
          "draggable": true
        }
      ]
    },
    {
      "id": "customer-detail",
      "name": "顧客詳細",
      "type": "detail",
      "route": "/customers/:id",
      "table": "customers",
      "layout": "two-column",
      "sections": [
        {
          "id": "customer-info",
          "label": "顧客情報",
          "type": "form",
          "fields": [
            "id",
            "name",
            "company",
            "department",
            "position",
            "email",
            "phone",
            "postalCode",
            "address",
            "industry",
            "employeeCount",
            "annualRevenue",
            "status",
            "probability",
            "assignedTo",
            "lastContact",
            "registrationDate",
            "notes"
          ],
          "editable": true
        },
        {
          "id": "related-deals",
          "label": "関連商談",
          "type": "table",
          "table": "deals",
          "relation": {
            "field": "customerId",
            "value": "{{customer.id}}"
          },
          "columns": [
            {
              "field": "title",
              "label": "商談名"
            },
            {
              "field": "stage",
              "label": "ステージ",
              "render": "badge"
            },
            {
              "field": "amount",
              "label": "金額",
              "format": "currency"
            },
            {
              "field": "probability",
              "label": "成約確率",
              "format": "percentage"
            },
            {
              "field": "expectedCloseDate",
              "label": "見込み成約日",
              "format": "date"
            }
          ],
          "actions": [
            {
              "type": "create",
              "label": "新規商談作成"
            },
            {
              "type": "edit",
              "label": "編集"
            }
          ]
        },
        {
          "id": "activity-timeline",
          "label": "活動履歴",
          "type": "timeline",
          "table": "activities",
          "relation": {
            "field": "customerId",
            "value": "{{customer.id}}"
          },
          "groupBy": "date",
          "fields": [
            {
              "field": "type",
              "label": "活動種別",
              "render": "badge",
              "icon": true
            },
            {
              "field": "title",
              "label": "タイトル",
              "primary": true
            },
            {
              "field": "description",
              "label": "内容"
            },
            {
              "field": "activityDateTime",
              "label": "活動日時",
              "format": "datetime"
            },
            {
              "field": "assignedTo",
              "label": "担当者"
            },
            {
              "field": "nextAction",
              "label": "次回アクション"
            },
            {
              "field": "nextActionDate",
              "label": "次回アクション日",
              "format": "date"
            },
            {
              "field": "priority",
              "label": "重要度",
              "render": "badge"
            }
          ],
          "filters": [
            {
              "field": "type",
              "type": "select",
              "label": "活動種別"
            }
          ],
          "actions": [
            {
              "type": "create",
              "label": "新規活動登録"
            },
            {
              "type": "edit",
              "label": "編集"
            },
            {
              "type": "delete",
              "label": "削除"
            }
          ],
          "defaultSort": {
            "field": "activityDateTime",
            "order": "desc"
          }
        }
      ]
    },
    {
      "id": "quotes-list",
      "name": "見積書一覧",
      "type": "table",
      "route": "/quotes",
      "table": "quotes",
      "searchable": true,
      "searchFields": ["quoteNumber", "title"],
      "columns": [
        {
          "field": "quoteNumber",
          "label": "見積書番号",
          "width": 150,
          "sortable": true
        },
        {
          "field": "title",
          "label": "タイトル",
          "width": 200,
          "sortable": true
        },
        {
          "field": "customerId",
          "label": "顧客",
          "width": 150,
          "relation": {
            "table": "customers",
            "field": "company"
          }
        },
        {
          "field": "amount",
          "label": "見積金額",
          "width": 120,
          "sortable": true,
          "format": "currency"
        },
        {
          "field": "status",
          "label": "ステータス",
          "width": 120,
          "sortable": true,
          "render": "badge"
        },
        {
          "field": "issueDate",
          "label": "発行日",
          "width": 120,
          "sortable": true,
          "format": "date"
        },
        {
          "field": "validUntil",
          "label": "有効期限",
          "width": 120,
          "sortable": true,
          "format": "date"
        },
        {
          "field": "assignedTo",
          "label": "担当者",
          "width": 120,
          "sortable": true
        }
      ],
      "filters": [
        {
          "field": "status",
          "type": "select",
          "label": "ステータス"
        },
        {
          "field": "assignedTo",
          "type": "select",
          "label": "担当者"
        }
      ],
      "actions": [
        {
          "type": "create",
          "label": "新規見積書作成"
        },
        {
          "type": "edit",
          "label": "編集"
        },
        {
          "type": "delete",
          "label": "削除"
        },
        {
          "type": "view",
          "label": "詳細",
          "route": "/quotes/:id"
        }
      ],
      "defaultSort": {
        "field": "issueDate",
        "order": "desc"
      },
      "pagination": {
        "pageSize": 20
      }
    },
    {
      "id": "invoices-list",
      "name": "請求書一覧",
      "type": "table",
      "route": "/invoices",
      "table": "invoices",
      "searchable": true,
      "searchFields": ["invoiceNumber", "title"],
      "columns": [
        {
          "field": "invoiceNumber",
          "label": "請求書番号",
          "width": 150,
          "sortable": true
        },
        {
          "field": "title",
          "label": "タイトル",
          "width": 200,
          "sortable": true
        },
        {
          "field": "customerId",
          "label": "顧客",
          "width": 150,
          "relation": {
            "table": "customers",
            "field": "company"
          }
        },
        {
          "field": "totalAmount",
          "label": "請求金額",
          "width": 120,
          "sortable": true,
          "format": "currency"
        },
        {
          "field": "status",
          "label": "ステータス",
          "width": 120,
          "sortable": true,
          "render": "badge"
        },
        {
          "field": "issueDate",
          "label": "発行日",
          "width": 120,
          "sortable": true,
          "format": "date"
        },
        {
          "field": "dueDate",
          "label": "支払期限",
          "width": 120,
          "sortable": true,
          "format": "date"
        },
        {
          "field": "paidDate",
          "label": "入金日",
          "width": 120,
          "sortable": true,
          "format": "date"
        }
      ],
      "filters": [
        {
          "field": "status",
          "type": "select",
          "label": "ステータス"
        },
        {
          "field": "assignedTo",
          "type": "select",
          "label": "担当者"
        }
      ],
      "actions": [
        {
          "type": "create",
          "label": "新規請求書作成"
        },
        {
          "type": "edit",
          "label": "編集"
        },
        {
          "type": "delete",
          "label": "削除"
        },
        {
          "type": "view",
          "label": "詳細",
          "route": "/invoices/:id"
        }
      ],
      "defaultSort": {
        "field": "issueDate",
        "order": "desc"
      },
      "pagination": {
        "pageSize": 20
      }
    },
    {
      "id": "tasks-list",
      "name": "タスク管理",
      "type": "table",
      "route": "/tasks",
      "table": "tasks",
      "searchable": true,
      "searchFields": ["title", "description"],
      "columns": [
        {
          "field": "title",
          "label": "タスク名",
          "width": 250,
          "sortable": true
        },
        {
          "field": "status",
          "label": "ステータス",
          "width": 100,
          "sortable": true,
          "render": "badge"
        },
        {
          "field": "priority",
          "label": "優先度",
          "width": 100,
          "sortable": true,
          "render": "badge"
        },
        {
          "field": "customerId",
          "label": "顧客",
          "width": 150,
          "relation": {
            "table": "customers",
            "field": "company"
          }
        },
        {
          "field": "assignedTo",
          "label": "担当者",
          "width": 120,
          "sortable": true
        },
        {
          "field": "dueDate",
          "label": "期限日",
          "width": 120,
          "sortable": true,
          "format": "date"
        },
        {
          "field": "dueTime",
          "label": "期限時刻",
          "width": 100,
          "format": "time"
        },
        {
          "field": "completedDate",
          "label": "完了日",
          "width": 120,
          "sortable": true,
          "format": "date"
        }
      ],
      "filters": [
        {
          "field": "status",
          "type": "select",
          "label": "ステータス"
        },
        {
          "field": "priority",
          "type": "select",
          "label": "優先度"
        },
        {
          "field": "assignedTo",
          "type": "select",
          "label": "担当者"
        }
      ],
      "actions": [
        {
          "type": "create",
          "label": "新規タスク作成"
        },
        {
          "type": "edit",
          "label": "編集"
        },
        {
          "type": "delete",
          "label": "削除"
        },
        {
          "type": "complete",
          "label": "完了"
        }
      ],
      "defaultSort": {
        "field": "dueDate",
        "order": "asc"
      },
      "pagination": {
        "pageSize": 20
      }
    },
    {
      "id": "contracts-list",
      "name": "契約管理",
      "type": "table",
      "route": "/contracts",
      "table": "contracts",
      "searchable": true,
      "searchFields": ["contractNumber", "title"],
      "columns": [
        {
          "field": "contractNumber",
          "label": "契約番号",
          "width": 150,
          "sortable": true
        },
        {
          "field": "title",
          "label": "契約名",
          "width": 200,
          "sortable": true
        },
        {
          "field": "customerId",
          "label": "顧客",
          "width": 150,
          "relation": {
            "table": "customers",
            "field": "company"
          }
        },
        {
          "field": "contractType",
          "label": "契約種別",
          "width": 120,
          "sortable": true,
          "render": "badge"
        },
        {
          "field": "amount",
          "label": "契約金額",
          "width": 120,
          "sortable": true,
          "format": "currency"
        },
        {
          "field": "billingCycle",
          "label": "請求サイクル",
          "width": 100,
          "sortable": true
        },
        {
          "field": "status",
          "label": "ステータス",
          "width": 120,
          "sortable": true,
          "render": "badge"
        },
        {
          "field": "startDate",
          "label": "開始日",
          "width": 120,
          "sortable": true,
          "format": "date"
        },
        {
          "field": "endDate",
          "label": "終了日",
          "width": 120,
          "sortable": true,
          "format": "date"
        },
        {
          "field": "autoRenewal",
          "label": "自動更新",
          "width": 100,
          "render": "badge"
        }
      ],
      "filters": [
        {
          "field": "status",
          "type": "select",
          "label": "ステータス"
        },
        {
          "field": "contractType",
          "type": "select",
          "label": "契約種別"
        },
        {
          "field": "billingCycle",
          "type": "select",
          "label": "請求サイクル"
        }
      ],
      "actions": [
        {
          "type": "create",
          "label": "新規契約作成"
        },
        {
          "type": "edit",
          "label": "編集"
        },
        {
          "type": "delete",
          "label": "削除"
        },
        {
          "type": "view",
          "label": "詳細",
          "route": "/contracts/:id"
        }
      ],
      "defaultSort": {
        "field": "startDate",
        "order": "desc"
      },
      "pagination": {
        "pageSize": 20
      }
    },
    {
      "id": "sales-report",
      "name": "売上分析レポート",
      "type": "dashboard",
      "route": "/reports/sales",
      "layout": "grid",
      "columns": 12,
      "widgets": [
        {
          "id": "total-revenue",
          "type": "stat",
          "label": "総売上",
          "query": {
            "table": "invoices",
            "aggregation": "sum",
            "field": "totalAmount",
            "filter": {
              "status": "入金済み"
            }
          },
          "icon": "trending-up",
          "color": "#10b981",
          "colSpan": 4,
          "format": "currency"
        },
        {
          "id": "monthly-revenue-growth",
          "type": "stat",
          "label": "月次売上成長率",
          "query": {
            "table": "invoices",
            "aggregation": "percentage",
            "field": "totalAmount",
            "filter": {
              "status": "入金済み"
            }
          },
          "icon": "percent",
          "color": "#3b82f6",
          "colSpan": 4,
          "format": "percentage"
        },
        {
          "id": "average-deal-size",
          "type": "stat",
          "label": "平均商談金額",
          "query": {
            "table": "deals",
            "aggregation": "avg",
            "field": "amount",
            "filter": {
              "stage": "成約"
            }
          },
          "icon": "dollar-sign",
          "color": "#f59e0b",
          "colSpan": 4,
          "format": "currency"
        },
        {
          "id": "revenue-by-month",
          "type": "chart",
          "label": "月次売上推移",
          "chartType": "line",
          "query": {
            "table": "invoices",
            "groupBy": "paidDate",
            "aggregation": "sum",
            "field": "totalAmount",
            "filter": {
              "status": "入金済み"
            }
          },
          "colSpan": 6
        },
        {
          "id": "revenue-by-customer-rank",
          "type": "chart",
          "label": "顧客ランク別売上",
          "chartType": "bar",
          "query": {
            "table": "invoices",
            "join": {
              "table": "customers",
              "on": "customerId"
            },
            "groupBy": "customerRank",
            "aggregation": "sum",
            "field": "totalAmount",
            "filter": {
              "status": "入金済み"
            }
          },
          "colSpan": 6
        },
        {
          "id": "top-customers",
          "type": "list",
          "label": "上位顧客（売上順）",
          "query": {
            "table": "invoices",
            "join": {
              "table": "customers",
              "on": "customerId"
            },
            "groupBy": "customerId",
            "aggregation": "sum",
            "field": "totalAmount",
            "filter": {
              "status": "入金済み"
            },
            "limit": 10,
            "sort": {
              "field": "totalAmount",
              "order": "desc"
            }
          },
          "fields": [
            {
              "field": "company",
              "label": "会社名"
            },
            {
              "field": "customerRank",
              "label": "ランク",
              "render": "badge"
            },
            {
              "field": "totalAmount",
              "label": "売上",
              "format": "currency"
            }
          ],
          "colSpan": 12
        }
      ]
    }
  ],
  "theme": {
    "primaryColor": "#8b5cf6",
    "secondaryColor": "#6366f1",
    "fontFamily": "Inter, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif",
    "borderRadius": "8px",
    "darkMode": true,
    "spacing": {
      "small": "8px",
      "medium": "16px",
      "large": "24px"
    },
    "colors": {
      "success": "#10b981",
      "warning": "#f59e0b",
      "error": "#ef4444",
      "gray": "#6b7280"
    }
  }
}
