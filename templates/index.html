<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AppNavi ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆä¸€è¦§</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 2rem;
    }
    
    .container {
      max-width: 1200px;
      margin: 0 auto;
    }
    
    header {
      text-align: center;
      color: white;
      margin-bottom: 3rem;
    }
    
    header h1 {
      font-size: 2.5rem;
      margin-bottom: 0.5rem;
    }
    
    header p {
      font-size: 1.2rem;
      opacity: 0.9;
    }
    
    .templates-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 2rem;
      margin-top: 2rem;
    }
    
    .template-card {
      background: white;
      border-radius: 12px;
      padding: 1.5rem;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      transition: transform 0.2s, box-shadow 0.2s;
      cursor: pointer;
      text-decoration: none;
      color: inherit;
      display: block;
    }
    
    .template-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 8px 12px rgba(0, 0, 0, 0.15);
    }
    
    .template-icon {
      width: 60px;
      height: 60px;
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 2rem;
      margin-bottom: 1rem;
    }
    
    .template-card h3 {
      font-size: 1.5rem;
      margin-bottom: 0.5rem;
      color: #1a202c;
    }
    
    .template-card .category {
      font-size: 0.875rem;
      color: #718096;
      margin-bottom: 1rem;
    }
    
    .template-card .description {
      color: #4a5568;
      line-height: 1.6;
      margin-bottom: 1rem;
    }
    
    .template-card .tags {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      margin-top: 1rem;
    }
    
    .tag {
      background: #edf2f7;
      padding: 0.25rem 0.75rem;
      border-radius: 9999px;
      font-size: 0.75rem;
      color: #4a5568;
    }
    
    .loading {
      text-align: center;
      color: white;
      font-size: 1.2rem;
      padding: 2rem;
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>AppNavi ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆä¸€è¦§</h1>
      <p>ç›®çš„ç‰¹åŒ–å‹ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’é¸æŠã—ã¦ã€ã™ãã«ã‚¢ãƒ—ãƒªã‚’ä½œæˆ</p>
    </header>
    
    <div id="templates-container" class="loading">
      ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’èª­ã¿è¾¼ã¿ä¸­...
    </div>
  </div>
  
  <script>
    // ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ‡ãƒ¼ã‚¿ï¼ˆãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ç”¨ï¼‰
    const TEMPLATES_DATA = {
      "templates": [
        {
          "templateId": "crm",
          "name": "é¡§å®¢ç®¡ç†ï¼ˆCRMï¼‰",
          "description": "é¡§å®¢æƒ…å ±ã€å•†è«‡ç®¡ç†ã€æ´»å‹•å±¥æ­´ã‚’ä¸€å…ƒç®¡ç†",
          "category": "å–¶æ¥­ãƒ»ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°",
          "color": "purple",
          "demoUrl": "templates/crm/",
          "tags": ["å–¶æ¥­", "é¡§å®¢ç®¡ç†", "å•†è«‡", "CRM"]
        },
        {
          "templateId": "google-calendar-group",
          "name": "Googleã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã®ã‚°ãƒ«ãƒ¼ãƒ—åŒ–",
          "description": "è¤‡æ•°ã®Googleã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‚’çµ±åˆã—ã€ã‚°ãƒ«ãƒ¼ãƒ—åˆ¥ã«ç®¡ç†ãƒ»è¡¨ç¤º",
          "category": "ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ç®¡ç†",
          "color": "orange",
          "demoUrl": "templates/google-calendar-group/",
          "tags": ["ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼", "ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«", "Google", "ã‚°ãƒ«ãƒ¼ãƒ—ç®¡ç†"]
        },
        {
          "templateId": "daily-report",
          "name": "æ—¥å ±ãƒã‚§ãƒƒã‚¯",
          "description": "æ—¥ã€…ã®æ¥­å‹™æ´»å‹•ã®è¨˜éŒ²ã¨ãƒã‚§ãƒƒã‚¯ã€è‡ªå‹•é€£æº",
          "category": "æ¥­å‹™ç®¡ç†",
          "color": "green",
          "demoUrl": "templates/daily-report/",
          "tags": ["æ—¥å ±", "æ´»å‹•å ±å‘Š", "ãƒã‚§ãƒƒã‚¯", "æ¥­å‹™ç®¡ç†"]
        },
        {
          "templateId": "auto-integration",
          "name": "è‡ªå‹•é€£æº",
          "description": "å„ç¨®ã‚µãƒ¼ãƒ“ã‚¹ã¨ã®è‡ªå‹•é€£æºã¨ãƒ‡ãƒ¼ã‚¿åŒæœŸ",
          "category": "é€£æºãƒ»çµ±åˆ",
          "color": "blue",
          "demoUrl": "templates/auto-integration/",
          "tags": ["é€£æº", "çµ±åˆ", "è‡ªå‹•åŒ–", "ãƒ‡ãƒ¼ã‚¿åŒæœŸ"]
        }
      ]
    }
    
    // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«å®Ÿè¡Œ
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', function() {
        console.log('DOM loaded, loading templates...')
        // å³åº§ã«ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿ã‚’è¡¨ç¤ºï¼ˆAPIãŒå¤±æ•—ã—ã¦ã‚‚è¡¨ç¤ºã•ã‚Œã‚‹ï¼‰
        renderTemplates(TEMPLATES_DATA.templates)
        // ãã®å¾Œã€APIã‹ã‚‰æœ€æ–°ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã‚’è©¦ã¿ã‚‹
        loadTemplates()
      })
    } else {
      // DOMãŒæ—¢ã«èª­ã¿è¾¼ã¾ã‚Œã¦ã„ã‚‹å ´åˆ
      console.log('DOM already loaded, loading templates...')
      renderTemplates(TEMPLATES_DATA.templates)
      loadTemplates()
    }
    
    // ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
    async function loadTemplates() {
      const container = document.getElementById('templates-container')
      if (!container) {
        console.error('templates-containerè¦ç´ ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“')
        return
      }
      
      try {
        // ç›¸å¯¾ãƒ‘ã‚¹ã‚’ç¾åœ¨ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªåŸºæº–ã«ä¿®æ­£
        let basePath = window.location.pathname
        if (!basePath.endsWith('/')) {
          basePath = basePath.substring(0, basePath.lastIndexOf('/') + 1)
        }
        const apiPath = basePath + 'api/templates.json'
        console.log('Fetching from:', apiPath)
        
        const response = await fetch(apiPath)
        if (!response.ok) {
          throw new Error(`HTTP error! status: ${response.status}`)
        }
        const data = await response.json()
        console.log('Templates loaded from API:', data)
        // APIã‹ã‚‰å–å¾—ã§ããŸå ´åˆã¯ã€æœ€æ–°ãƒ‡ãƒ¼ã‚¿ã§æ›´æ–°
        if (data && data.templates && data.templates.length > 0) {
          renderTemplates(data.templates)
        }
      } catch (error) {
        console.warn('APIã‹ã‚‰ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã€ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ç”¨:', error)
        // ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯: åŸ‹ã‚è¾¼ã¾ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ç”¨
        renderTemplates(TEMPLATES_DATA.templates)
      }
    }
    
    // ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’è¡¨ç¤º
    function renderTemplates(templates) {
      const container = document.getElementById('templates-container')
      if (!container) {
        console.error('templates-containerè¦ç´ ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“')
        return
      }
      
      container.className = 'templates-grid'
      
      const colorMap = {
        'purple': { bg: '#8b5cf6', text: '#fff' },
        'orange': { bg: '#f97316', text: '#fff' },
        'green': { bg: '#10b981', text: '#fff' },
        'blue': { bg: '#3b82f6', text: '#fff' },
      }
      
      const iconMap = {
        'crm': 'ğŸ‘¥',
        'google-calendar-group': 'ğŸ“…',
        'daily-report': 'ğŸ“‹',
        'auto-integration': 'ğŸ”„',
      }
      
      let basePath = window.location.pathname
      if (!basePath.endsWith('/')) {
        basePath = basePath.substring(0, basePath.lastIndexOf('/') + 1)
      }
      
      container.innerHTML = templates.map(template => {
        const color = colorMap[template.color] || { bg: '#6b7280', text: '#fff' }
        const icon = iconMap[template.templateId] || 'ğŸ“¦'
        const demoPath = template.demoUrl || basePath + `templates/${template.templateId}/`
        
        return `
          <a href="${demoPath}" class="template-card">
            <div class="template-icon" style="background: ${color.bg}; color: ${color.text};">
              ${icon}
            </div>
            <h3>${template.name}</h3>
            <div class="category">${template.category}</div>
            <div class="description">${template.description}</div>
            <div class="tags">
              ${template.tags.map(tag => `<span class="tag">${tag}</span>`).join('')}
            </div>
          </a>
        `
      }).join('')
    }
  </script>
</body>
</html>

