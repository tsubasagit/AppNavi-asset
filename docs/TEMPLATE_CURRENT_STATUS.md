# テンプレート機能の現状確認

## 質問内容の確認

「テンプレートを作成したら、AppNaviの操作で、AppNaviのデザインができ、Googleスプレッドシートなどのサンプルデータも作れるようになっていますか？」

## 現状の機能

### ✅ 実装されている機能

1. **テンプレートサーバー**
   - テンプレートのメタデータ配信（`/api/templates.json`）
   - テンプレート詳細ページの表示
   - AppNaviの「方針」タブからテンプレートを取得して表示

2. **テンプレート詳細ページ**
   - テンプレートの説明
   - 推奨データ構造の説明
   - データベーススキーマの説明
   - サンプルデータの例（JSON形式）

3. **マーケットプレイス機能**
   - テンプレート一覧表示
   - 検索・フィルタリング
   - 詳細ページ表示

### ❌ 実装されていない機能

1. **テンプレートからAppNaviアプリケーションの自動生成**
   - テンプレートを選択したら、自動的にAppNaviのデザイン（画面構成、コンポーネント）が生成される機能は**実装されていません**
   - 現在は、テンプレートは「説明ページ」として機能しているのみ

2. **Googleスプレッドシートのサンプルデータ自動生成**
   - テンプレートからGoogleスプレッドシートのサンプルデータを自動生成する機能は**実装されていません**
   - 現在は、サンプルデータはJSON形式で説明ページに記載されているのみ

3. **テンプレート適用機能**
   - テンプレートを選択して、実際のAppNaviアプリケーションに適用する機能は**実装されていません**
   - プラグインのインストール機能（`postMessage`）はありますが、テンプレート適用には使用されていません

## 現在のテンプレートの役割

現在のテンプレートは以下の役割を果たしています：

1. **ドキュメントとしての機能**
   - テンプレートの説明
   - 推奨データ構造の説明
   - データベーススキーマの説明

2. **参考資料としての機能**
   - サンプルデータの例（JSON形式）
   - ダッシュボードプレビュー
   - デザインガイド

3. **マーケットプレイスでの表示**
   - テンプレート一覧での表示
   - 詳細ページでの表示

## 必要な追加実装

テンプレートから実際のAppNaviアプリケーションを生成するには、以下の機能が必要です：

### 1. テンプレート定義ファイル

テンプレートに以下の情報を含める必要があります：

```json
{
  "templateId": "crm",
  "name": "顧客管理（CRM）",
  "schema": {
    "tables": [
      {
        "name": "customers",
        "fields": [
          { "name": "id", "type": "string", "required": true },
          { "name": "name", "type": "string", "required": true },
          { "name": "company", "type": "string" },
          // ...
        ]
      }
    ]
  },
  "views": [
    {
      "name": "顧客一覧",
      "type": "table",
      "table": "customers",
      "columns": ["name", "company", "status"]
    },
    {
      "name": "商談パイプライン",
      "type": "kanban",
      "table": "deals",
      "stages": ["見込み", "商談中", "提案中", "成約"]
    }
  ],
  "sampleData": {
    "customers": [
      { "id": "cust_001", "name": "田中太郎", "company": "株式会社ABC", ... }
    ]
  }
}
```

### 2. AppNavi側の実装

AppNavi本体に以下の機能が必要です：

1. **テンプレート適用機能**
   - テンプレート定義を読み込む
   - データベーススキーマを生成
   - ビュー（画面）を生成
   - サンプルデータを投入

2. **Googleスプレッドシート連携**
   - テンプレートのサンプルデータをGoogleスプレッドシート形式で生成
   - Googleスプレッドシートへのエクスポート機能
   - Googleスプレッドシートからのインポート機能

### 3. テンプレートサーバー側の拡張

1. **テンプレート定義API**
   - `/api/templates/{templateId}/schema.json` - スキーマ定義
   - `/api/templates/{templateId}/views.json` - ビュー定義
   - `/api/templates/{templateId}/sample-data.json` - サンプルデータ

2. **Googleスプレッドシート生成API**
   - `/api/templates/{templateId}/spreadsheet` - Googleスプレッドシート形式のデータ生成

## まとめ

**現状では、テンプレートを作成しても：**

- ❌ AppNaviのデザイン（画面構成）は自動生成されません
- ❌ Googleスプレッドシートのサンプルデータは自動生成されません
- ✅ テンプレートの説明ページは表示されます
- ✅ 推奨データ構造の説明は表示されます

**必要な機能を実装するには：**

1. テンプレート定義ファイルの拡張
2. AppNavi本体へのテンプレート適用機能の実装
3. Googleスプレッドシート連携機能の実装

これらの機能を実装することで、テンプレートから実際のAppNaviアプリケーションとサンプルデータを生成できるようになります。

---

**最終更新日**: 2024年12月29日
